@model List<PrachiIndia.Portal.Models.OrderTrackUpdateVm>
@{
    //Layout = "~/Views/Shared/ _Layout.cshtml";
    var customer = ViewBag.Customer;
}
@using (Html.BeginForm("UpdateOrderTrack", "Admin", FormMethod.Post))
{
    <div style="margin-left:270px;margin-top:20px; width:80%">

        <div class="pull-right">
            <span onclick="printDiv('printableArea')" style="cursor:pointer"><i class="fa fa-print" aria-hidden="true"></i></span>
            @*<input type="button" onclick="printDiv('printableArea')" value="print a div!" />*@

        </div>
        <h3 style="border-top: 1px solid #ccc;">Order Detail </h3>

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="table-responsive" id="printableArea">
                    <div class="col-md-4">
                        @*<h4 style="color:#ae0910;">STATUS: Model</h4>*@
                        <strong style="text-decoration: underline;text-transform: uppercase;">ORDERED BY</strong>
                        <p>
                            COMPANY: <a href="http://PublicationDivision.com/">Prach [India] Pvt. Ltd.</a><br />
                            Website: <a href="http://PublicationDivision.com/">www.PrachiIndia.com</a><br />
                            Email: <a href="">info@PrachiIndia.com</a><br />
                            Address: 309/10, ALLIED HOUSE<br />
                            INDER LOK,DELHI-110035<br />
                            Contact no: + 91-11-47320666(8 Lines)
                        </p>

                    </div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        @if (customer != null)
                    {
                    <p>Date: @DateTime.Now.ToString("dd/MM/yyyy")</p>
                    <strong style="text-decoration: underline;text-transform: uppercase;">BILLING ADDRESS</strong>
                    <p>
                        Name: @customer.FirstName.ToUpper()<br />
                        Email:@customer.Email<br />
                        Address: @customer.Address<br />
                        Country:@customer.Country<br />
                        State: @customer.State  <br />
                        City: @customer.City<br />
                        Pincode: @customer.PinCode
                    </p>
                    }
                    </div>

                    <table class="table table-bordered">

                        <thead style="text-align: center;background-color: #337ab7;color: #ffffff;">
                            <tr>

                                <th>Book Name</th>
                                <th>Book Type</th>
                                <th>TransactionId</th>
                                <th>Unit Price</th>
                                <th>Quantity</th>
                                <th>Discount</th>
                                <th>Subtotal</th>

                            </tr>
                        </thead>
                        <tbody style="text-align: center;">
                            @{
                            decimal sum = 0;
                            decimal totalDiscount = 0;
                            var flag = "";

                            foreach (var obj in Model)
                            {
                                var discount = Convert.ToDecimal("0.00") * Convert.ToInt32(obj.Quantity);
                                var price = (Convert.ToDecimal(obj.price)) * Convert.ToInt32(obj.Quantity);
                                var subtotal = price - discount;
                                totalDiscount += discount;
                                sum += subtotal;
                        <tr>
                            <td align="left"><img src="@obj.Image" style="width:40px">@obj.Title</td>
                            @if (obj.BookType == "2")
                                    {
                                    <td align="right">Ebook</td>
                                    }
                                    else
                                    {
                                    <td align="right">Pbook</td>
                                    }
                            <td align="right">@obj.TransactionId</td>
                            <td align="right"><i class="fa fa-inr"></i>&nbsp;@obj.price</td>
                            <td align="right">@obj.Quantity</td>
                            <td align="right"><i class="fa fa-inr"></i>&nbsp;@discount</td>
                            <td align="right"><i class="fa fa-inr">&nbsp;@subtotal</i></td>

                            @Html.Hidden("OrderId", obj.OrderId)
                        </tr>
                            }
                        <tr>
                            <td colspan="6" align="right" style="text-align:right"><strong> Total Discount: </strong></td>
                            <td align="right" style="text-align:right"><strong><i class="fa fa-inr"></i>&nbsp;@totalDiscount</strong></td>
                        </tr>
                        <tr>
                            <td colspan="6" align="right" style="text-align:right"><strong> Total Amount: </strong></td>
                            <td align="right" style="text-align:right"><strong><i class="fa fa-inr"></i>&nbsp;@sum</strong></td>
                        </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

                                }
@section scripts{
    <script>
        function printDiv(divName) {
            var printContents = document.getElementById(divName).innerHTML;
            var originalContents = document.body.innerHTML;
            document.body.innerHTML = printContents;
            window.print();
            document.body.innerHTML = originalContents;
        }
    </script>
}