@{
    ViewBag.Title = "Index";
}
<!DOCTYPE html>
<html>
<head>
    <link href="~/Content/dataTables.bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/DataTables/css/jquery.dataTables.min.css" rel="stylesheet" />
    <script src="~/Scripts/DataTables/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
</head>
<body>

    <div class="container-fluid">
        <div class="panel panel-default">
            <div class="panel-heading"><h4 style="padding: 8px 0;">Company Address<span class="pull-right"><a href="#" id="AddCompany" class="btn btn-primary btn-sm"><i class="fa fa-plus" aria-hidden="true"></i></a></span></h4></div>
            <div class="panel-body">

                <div id="container">
                    <div id="demo">
                        <div class="col-md-12">
                            <p class="text-info" style="margin-top:5px;margin-top: 10px;"> @DateTime.Now.ToString("dddd, dd MMMM yyyy hh:mm tt")</p>
                            @Html.Partial("_AddCompanyAddress")
                            @Html.Partial("_EditCompanyAddress")
                        </div>
                        <div class="clearfix"></div>
                        <div class="panel-body table-responsive">
                            <div class="table table-striped table-bordered">
                                <table id='directory_table' class="table table-striped table-bordered">
                                    <thead>
                                        <tr>

                                            <th>StateName</th>
                                            <th>H_No</th>
                                            <th>Address</th>
                                            <th>NearBy</th>
                                            <th>City</th>
                                            <th>Pincode</th>
                                            <th>mobileno</th>
                                            <th>Email</th>
                                        </tr>
                                    <thead>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>


   


</body>
</html>
@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $('#directory_table').dataTable({
                "ajax": {
                    "url": "http://localhost:62906/CPanel/CompanyAddress/getCompanyAddress",
                    "dataSrc": "aaData"
                },
                "columns": [
                    { "data": "StateName" },
                    { "data": "H_No" },
                    { "data": "Address" },
                    { "data": "NearBy" },
                    { "data": "City" },
                    { "data": "Pincode" },
                    { "data": "mobileno" },
                    { "data": "Email" }
                ]

            });
            var table = $('#directory_table').DataTable();
            $('#directory_table tbody').on('click', 'tr', function () {
                var abc = table.row(this).data();
                var jsonstring = JSON.stringify(abc)
                var t = JSON.parse(jsonstring);
                var model = {
                    id: t['id'],
                    StateName: t['StateName'],
                    H_No: t['H_No'],
                    Address: t['Address'],
                    NearBy: t['NearBy'],
                    City: t['City'],
                    Pincode: t['Pincode'],
                    mobileno: t['mobileno'],
                    Email: t['Email'],
                    IsMainOffice: t['IsMainOffice'],
                    Color: t['Color']
                };
                $.getJSON('@Url.Action("EditCompanyAddress", "CompanyAddress")', model, function (dataVal) {
                    var vals = $("#n").val(model.StateName);
                    $("#editval").append(vals);
                    $('#EditCompanyAddress').modal('show');

                });
            });
        });
        $("#AddCompany").click(function () {
            $('#CompanyAddress').modal('show');
        });



    </script>
}
