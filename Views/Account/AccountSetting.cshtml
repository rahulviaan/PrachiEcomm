@model PrachiIndia.Portal.Models.RegisterViewModel
@{
    ViewBag.Title = "AccountSetting";
    Layout = "~/Views/Shared//_LayoutCatalouge.cshtml";
}
@*<h2>AccountSetting</h2>*@

<style>
#profile {
margin-top: 2%;
}   
 .table-user-information td {
border: none !important;
padding: 10px 0 !important;
}
</style>
<!--
User Profile Sidebar by keenthemes
A component of Metronic Theme - #1 Selling Bootstrap 3 Admin Theme in Themeforest: http://j.mp/metronictheme
Licensed under MIT
-->
@*//Email,UserName,PhoneNumber,Name,Address,State,Country,[City],[Pincode],[ProfilePic]*@

<div class="row" id="profile">
    <div class="col-md-3" style="margin-top:2%;">
        <div style="background-color:#ffffff;border:solid 1px #e8e8e8;float: left;box-shadow: 0px 0px 2px #fbfbfb; width:100%;">
            <div class="panel-body">
                <!-- SIDEBAR USERPIC -->
                @foreach (var item in @ViewData["Profile"] as IEnumerable<PrachiIndia.Sql.AspNetUser>)
            {
            @*<div class="profile-userpic">
                <img src="~/img/no-profile-img.gif" class="img-responsive" alt="">
            </div>*@

            @*<div class="profile-usertitle">
                <div class="profile-usertitle-name">

                </div>

            </div>*@
            <div style="border-bottom: solid 1px #eeeeee;">
                <h4 class="text-left"> My Account</h4>
            </div>
            }@*<div class="profile-usermenu">*@
            <div>
                @*<ul class="nav">
                    <li class="active">
                        <a href="#" id="Profileusers"><i class="icon-history"></i><button class="btn btn-sm btn-default" type="submit"><i class="glyphicon glyphicon-home"></i>Overview</button></a>


                    </li>
                    <li>
                        <a href="#" id="ChangePwd"><i class="icon-history"></i><button class="btn btn-sm btn-default" type="submit"><i class="glyphicon glyphicon-user"></i>Change Password</button></a>


                    </li>
                    <li>
                        @using (Ajax.BeginForm("UserCartHistory", "CartHistory", new AjaxOptions { UpdateTargetId = "histroy", OnSuccess = "BindHistoryData", OnFailure = "ErrorField" }))
                        {
                            <a href="#" id="MycartHistory"><button style="width: 238px; margin-left: 14px;" class="btn btn-sm btn-default" type="submit"><i class="glyphicon glyphicon-briefcase"></i>Cart History</button></a>

                        }
                    </li>


                </ul>*@
                <div style="border:none;">
                    @*<p style="font-size:15px; font-weight:bold;line-height:15px;margin:0;padding:0;">Orders</p>*@

                    <ul class="accountSettings">
                        <li>
                            @*@using (Ajax.BeginForm("UserCartHistory", "CartHistory", new AjaxOptions { UpdateTargetId = "histroy", OnSuccess = "BindHistoryData", OnFailure = "ErrorField" }, new { id = "hISTORYiD" }))
                            {*@
                            <a href="#" id="MycartHistory"><i class="fa fa-briefcase"></i>&nbsp;&nbsp;My Orders </a>

                            @*}*@
                        </li>
                        @*<li><a href="/account/changepassword">My Orders </a> </li>*@

                    </ul>
                </div>
                @*<div class="settings">
     <p style="font-size:15px; font-weight:bold;line-height:15px;margin:0;padding:0;">My Readers</p>

    <ul class="accountSettings">
         <li><a href="@Url.Action("MyLibrary","Account")" id="MyLibrary"><i class="glyphicon glyphicon-book"></i>&nbsp;My Library </a></li>
         <li><a href="@Url.Action("MyReader","Account")" id="MyReader"><i class="glyphicon glyphicon-bookmark"></i>&nbsp;My Readers </a></li>
     </ul>
                </div>*@
                <div>
                    <div style="border-bottom: solid 1px #eeeeee;">
                        <h4 class="text-left"> Personal Information</h4>
                    </div>
                    <ul class="accountSettings">
                        <li><a href="#" id="Profileusers"><i class="fa fa-user"></i>&nbsp;&nbsp;Profile Settings</a></li>
                        <li><a href="#" id="ChangePwd"><i class="icon-history"></i><i class="fa fa-unlock-alt"></i>&nbsp;&nbsp;Change Password</a></li>
                        <li><a href="#" id="AddresID"><i class="fa fa-home"></i>&nbsp;&nbsp;Address </a> </li>
                        @*<li><a href="/account/profilesettings">Profile Settings </a> </li>*@

                        <li><a href="#"><i class="fa fa-refresh"></i>&nbsp;&nbsp;Update Email/Mobile </a> </li>
                        <li><a href="#"><i class="fa fa-user-times"></i>&nbsp;&nbsp;Deactivate Account </a> </li>
                        <li><a href="#"><i class="fa fa-bell"></i>&nbsp;&nbsp;Notifications </a> </li>
                        <li><a href="#"><i class="fa fa-envelope"></i>&nbsp;&nbsp;Email Preferences </a> </li>
                    </ul>
                </div>
            </div>
            <!-- END MENU -->
        </div>
    </div></div>
    @using (Html.BeginForm("AccountSetting", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        @Html.AntiForgeryToken()
        foreach (var item in @ViewData["Profile"] as IEnumerable<PrachiIndia.Sql.AspNetUser>)
        {
            <div id="profiles">
                @*<div class="col-md-5 toppad pull-right col-md-offset-3">
                     May 05,2014,03:00 pm
                    <A href="edit.html">Logout</A>
                    </div>*@
                <div class="col-md-9">
                    
                   
                        <div class="col-xs-12 col-sm-12">
                            <p class="text-info text-right"> @DateTime.Now.ToString("dddd, dd MMMM yyyy hh:mm tt")</p>
                            <div class="panel panel-default">
                                <div class="panel-heading" style="padding:20px 15px;">
                                    <h3 class="panel-title">@item.FirstName</h3>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-4 col-lg-4" align="center"> <img alt="User Pic" src="~/img/no-profile-img.gif" class="img-responsive img-thumbnail"> </div>
                                        <div class="col-md-8 col-lg-8">
                                            <div class="table-responsive">
                                                <table class="table table-user-information">
                                                    <tbody>
                                                        <tr>
                                                            <td width="20%"><b>User Name</b></td>
                                                            <td width="5%">:-</td>
                                                            <td width="75%">@item.UserName</td>
                                                        </tr>
                                                        <tr>
                                                            <td><b>Email</b></td>
                                                            <td>:-</td>
                                                            <td>@item.Email</td>
                                                        </tr>
                                                        <tr>
                                                            <td><b>Address</b></td>
                                                            <td>:-</td>
                                                            <td>@item.Address</td>
                                                        </tr>

                                                        <tr>
                                                        <tr>
                                                            <td><b>Country</b></td>
                                                            <td>:-</td>
                                                            <td>@item.Country</td>
                                                        </tr>
                                                        <tr>
                                                            <td><b>State</b></td>
                                                            <td>:-</td>
                                                            <td>@item.State</td>
                                                        </tr>
                                                        <tr>
                                                            <td><b>City</b></td>
                                                            <td>:-</td>
                                                            <td>@item.City</td>
                                                        </tr>
                                                        <tr>
                                                            <td><b>Phone Number</b></td>
                                                            <td>:-</td>
                                                            <td>
                                                                @item.PhoneNumber
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="3" class="text-left"><hr/><a href="Account/Edit" class="btn btn-primary"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i>&nbsp;Edit Profile</a></td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            @*<a href="#" class="btn btn-primary">My Sales Performance</a>
                                                <a href="#" class="btn btn-primary">Team Sales Performance</a>*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*Some user related content goes here...*@
                   

                </div>
            </div>

        }
    }
    @using (Ajax.BeginForm("ChangePassword", "Account", new AjaxOptions { UpdateTargetId = "ChegeEd", OnSuccess = "ChangeSuccess" }, new { id = "Changepwds" }))
    {
        <div class="col-md-9" id="divsid" style="display:none">
            <div class="col-xs-12 col-sm-12">
                <div class="" id="password_modal">
                    <div class="modal-header">
                        <h3>Change Password <span class="extra-title muted"></span></h3>
                    </div>
                    <div class="modal-body form-horizontal">
                        <div class="control-group">
                            <label for="current_password" class="control-label">Current Password</label>
                            <div class="controls">
                                @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
                                @Html.TextBoxFor(m => m.Password, new { @class = "form-control" })

                                @*<input type="password" name="current_password" class="form-control">*@
                            </div>
                        </div>
                        <div class="control-group">
                            <label for="new_password" class="control-label">New Password</label>
                            <div class="controls">
                                @Html.ValidationMessageFor(model => model.newPassword, "", new { @class = "text-danger" })
                                @Html.PasswordFor(m => m.newPassword, new { @class = "form-control" })
                                @*<input type="password" name="new_password" class="form-control">*@
                            </div>
                        </div>
                        <div class="control-group">
                            <label for="confirm_password" class="control-label">Confirm Password</label>
                            <div class="controls">
                                @Html.ValidationMessageFor(model => model.confirmPassword, "", new { @class = "text-danger" })
                                @Html.PasswordFor(m => m.confirmPassword, new { @class = "form-control" })
                                @*<input type="password" name="confirm_password" class="form-control">*@
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        @*<button href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>*@
                        <button type="submit" href="#" class="btn btn-primary" id="password_modal_save">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
    }


    @using (Html.BeginForm("AccountSetting", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        <div id="Address" style="display:none">
            <div class="account_page_address_info sel" id="address_CNTCT176E805876A7485A96E6CB6DC">
                <div class="account_page_address_data">
                    <span><b>Deepak Singh</b></span><br> <span>
                        E-498; Gali no.-9;<br>
                        West vinod nagar
                    </span><br> <span>
                        Near<br>
                        HDFC;ICICI;ANDAXIS<br>
                        ATM
                    </span><br> <span>delhi - 110092</span><br> <span>Delhi</span><br> <span>Ph: 7042112622</span><br> <br><br><br>
                </div>
                <div class="account_page_address_info_btn">
                    <div>
                        <input checked="checked" type="radio" id="default_billing_address" name="default_billing_address" onclick="setDefaultAddress('CNTCT176E805876A7485A96E6CB6DC')"> &nbsp;
                        <span>Default Address</span>
                    </div>
                </div>
                <div class="account_page_address_info_btn">
                    <a href="#" onclick="deleteAddress('CNTCT176E805876A7485A96E6CB6DC');return false;">Delete address</a>
                </div>
                <div class="cls">

                </div>
            </div>
        </div>
    }
    @using (Html.BeginForm("DeactivateUser", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {

    }
</div>


<center>
    <strong>Powered by <a href="#" target="_blank">PRACHI GROUP</a></strong>
</center>
<br>
<br>

@section scripts{
    @*<script src="~/Content/js/jquery.min.js"></script>*@
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    @*<link href="~/Content/css/bootstrap.min.css" rel="stylesheet" />*@
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/Scripts/notify.js"></script>
<link href="~/Content/css/style.css" rel="stylesheet" />
    <script>
        $(document).ready(function () {
            // alert("hi");
            $("#ChangePwd").click(function () {
                $("#profiles").css("display", "none")
                $("#divsid").css("display", "block");
                $("#History").css("display", "none");
            });
            $("#Profileusers").click(function () {
                $("#profiles").css("display", "block")
                $("#divsid").css("display", "none");
                $("#History").css("display", "none");
                $("#Address").css("display", "none");
            });
            $("#MycartHistory").click(function () {
                //alert("hi");
                $("#profiles").css("display", "none")
                $("#divsid").css("display", "none");
                $("#History").css("display", "block");
                $("#Address").css("display", "none");
                BindHistoryData();
                //$("#hISTORYiD").submit();
            });
            $("#AddresID").click(function () {
                $("#profiles").css("display", "none")
                $("#divsid").css("display", "none");
                $("#History").css("display", "none");
                $("#Address").css("display", "block");
            });
        });
        function ChangeSuccess(data) {
            $.notify(JSON.stringify(data), "success");
            var url = "/Account/AccountSetting";
            window.location.href = url;
        };
        function BindHistoryData() {
            $.getJSON('@Url.Action("UserCartHistory", "CartHistory")', function (data) {
                var html = "";
                if (data != null && data.length > 0) {
                    //alert("data val ");
                    $.each(data, function (i, item) {
                        html = html + '<div class="row">';
                        html = html + '<div class="col-md-1"><img src="' + item.Image + '" class="media-object"></div>';
                        html = html + '<div class="col-md-11">';
                        html = html + '<div class="row">';
                        html = html + '<div class="col-md-12">';
                        if (item.status) {
                            html = html + '<div class="pull-right"><i class="fa fa-certificate"></i> Approve</div>';
                        } else {
                            html = html + '<div class="pull-right"><i class="fa fa-certificate"></i>pending</div>';
                        }

                        html = html + '<span><strong>' + item.Title + '</strong></span>';
                        html = html + '<span class="label label-info">group name</span>';
                        html = html + '<br>';
                        html = html + '<span>Quantity: ' + item.Quantity + '</span>';
                        html = html + '<br>';
                        html = html + '<span>Cost: ' + item.price + '</span>';
                        html = html + '</div>';
                        html = html + '<div class="col-md-12">';
                        html = html + 'order made on: ' + item.date + ' TransactionId:' + item.TransactionId + ' by <a href="/Catalogue">The Best EU Deals </a>';
                        html = html + '</div>';
                        html = html + '</div>';
                        html = html + '</div>';
                        html = html + '</div>';
                    });
                }
                $("#pnlhistory").empty();
                $("#pnlhistory").append(html);
            });
        }
        function ErrorField() {

            alert("error");
        }
        function Editedprofile() {

        }
    </script>
}

